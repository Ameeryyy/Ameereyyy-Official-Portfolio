<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Feedback - Ameereyyy</title>
<link rel="stylesheet" href="footer.css">

<style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;700&display=swap');

    :root { 
        --bg-color: #050505; 
        --card-bg: #111; 
        --text-main: #ffffff; 
        --text-sec: #999999; 
        --accent: #4dff4d; 
        --error: #ff4d4d; 
        --border: #333; 
    }
    
    * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Inter', sans-serif; -webkit-tap-highlight-color: transparent; }
    
    body { background-color: var(--bg-color); color: var(--text-main); user-select: none; display: flex; flex-direction: column; min-height: 100vh; }
    input, textarea { -webkit-user-select: text; user-select: text; }

    /* HEADER */
    header {
        position: fixed; top: 0; width: 100%; padding: 20px 8%;
        display: flex; justify-content: space-between; align-items: center;
        background: rgba(5, 5, 5, 0.95); backdrop-filter: blur(10px);
        z-index: 1000; border-bottom: 1px solid rgba(255,255,255,0.08);
    }
    .page-title { font-size: 1.2rem; font-weight: 700; letter-spacing: 1px; }
    .close-btn { text-decoration: none; color: white; font-size: 1.5rem; padding: 5px; }

    /* CONTAINER */
    .container { padding: 100px 8% 0 8%; max-width: 600px; margin: 0 auto; flex: 1; width: 100%; }

    .intro-text { margin-bottom: 30px; text-align: center; }
    .intro-title { font-size: 1.5rem; font-weight: 700; margin-bottom: 5px; }
    .intro-desc { color: var(--text-sec); font-size: 0.9rem; }

    /* STAR RATING */
    .star-rating {
        display: flex; justify-content: center; gap: 10px; margin-bottom: 30px;
        background: var(--card-bg); padding: 15px; border-radius: 12px; border: 1px solid var(--border);
    }
    .star { font-size: 2rem; color: #444; cursor: pointer; transition: 0.2s; }
    .star.active { color: #ffd700; transform: scale(1.1); text-shadow: 0 0 10px rgba(255, 215, 0, 0.5); }

    /* FORM ELEMENTS */
    .form-group { margin-bottom: 25px; }
    .label { display: block; color: #888; margin-bottom: 10px; font-size: 0.8rem; letter-spacing: 1px; font-weight: 600; text-transform: uppercase; }
    
    .input-field, .textarea-field {
        width: 100%; background: var(--card-bg); border: 1px solid var(--border); padding: 15px; color: white;
        border-radius: 8px; font-size: 0.95rem; outline: none; transition: 0.3s;
    }
    .input-field:focus, .textarea-field:focus { border-color: white; box-shadow: 0 0 10px rgba(255,255,255,0.1); }
    .textarea-field { height: 150px; resize: none; }
    .char-counter { text-align: right; font-size: 0.75rem; color: #666; margin-top: 5px; font-family: monospace; }

    /* FILE UPLOAD BOX */
    .file-upload-box {
        border: 1px dashed #444; background: rgba(255,255,255,0.02); padding: 20px;
        text-align: center; border-radius: 8px; cursor: pointer; transition: 0.3s;
        display: block; position: relative;
    }
    .file-upload-box:hover { border-color: white; background: rgba(255,255,255,0.05); }
    .file-name { color: #4dff4d; margin-top: 5px; font-size: 0.85rem; word-break: break-all; }
    .file-hint { color: #666; font-size: 0.8rem; display: block; }

    /* SUBMIT BUTTON */
    .submit-btn {
        width: 100%; padding: 16px; background: white; color: black; font-weight: 700; border: none;
        border-radius: 8px; cursor: pointer; font-size: 1rem; margin-top: 10px; transition: 0.3s;
    }
    .submit-btn:active { transform: scale(0.98); }
    .submit-btn.loading { background: #333; color: #888; pointer-events: none; }
    .submit-btn.success { background: var(--accent); color: black; }

    /* CUSTOM ALERT MODAL */
    .modal-overlay {
        position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); backdrop-filter: blur(8px);
        display: none; align-items: center; justify-content: center; z-index: 2000;
        opacity: 0; transition: opacity 0.3s ease;
    }
    .modal-overlay.active { display: flex; opacity: 1; }
    .modal-box {
        background: #111; border: 1px solid #333; padding: 30px; border-radius: 16px; text-align: center; width: 320px;
        transform: scale(0.95); transition: transform 0.3s;
        box-shadow: 0 10px 40px rgba(0,0,0,0.5);
    }
    .modal-overlay.active .modal-box { transform: scale(1); }
    .modal-title { font-size: 1.2rem; margin-bottom: 10px; color: white; font-weight: 700; }
    .modal-desc { color: #888; font-size: 0.9rem; margin-bottom: 20px; line-height: 1.5; }
    .modal-btn { padding: 12px 20px; background: white; border: none; border-radius: 8px; font-weight: 700; cursor: pointer; width: 100%; color: black; }
    
    .text-error { color: var(--error); }
    .text-success { color: var(--accent); }

</style>
</head>
<body>

<header>
    <div class="page-title">Feedback</div>
    <a href="landing.html" class="close-btn">&times;</a>
</header>

<div class="container">
    <div class="intro-text">
        <h2 class="intro-title">Rate Experience</h2>
        <p class="intro-desc">Your opinion helps build the future.</p>
    </div>

    <form id="feedbackForm" onsubmit="event.preventDefault(); validateAndSubmit();">
        
        <div class="form-group">
            <label class="label" style="text-align: center;">HOW WAS YOUR EXPERIENCE?</label>
            <div class="star-rating" id="starContainer">
                <span class="star" data-value="1" onclick="rate(1)">★</span>
                <span class="star" data-value="2" onclick="rate(2)">★</span>
                <span class="star" data-value="3" onclick="rate(3)">★</span>
                <span class="star" data-value="4" onclick="rate(4)">★</span>
                <span class="star" data-value="5" onclick="rate(5)">★</span>
            </div>
            <input type="hidden" id="ratingValue" value="0">
        </div>

        <div class="form-group">
            <label class="label">GLOBAL INFINITY ID</label>
            <input type="text" id="gidInput" class="input-field" placeholder="GID-XXXX-XXXX">
        </div>

        <div class="form-group">
            <label class="label">DESCRIPTION</label>
            <textarea class="textarea-field" id="descBox" maxlength="1000" placeholder="Write your thoughts..." oninput="updateCounter()"></textarea>
            <div class="char-counter" id="charCount">0 / 1000</div>
        </div>

        <div class="form-group">
            <label class="label">ATTACHMENT (OPTIONAL)</label>
            <label class="file-upload-box">
                <input type="file" id="fileInput" accept=".zip,application/zip" hidden onchange="handleFile(this)">
                <span class="file-hint" id="fileLabel">Tap to upload .zip file</span>
                <div class="file-name" id="fileName"></div>
            </label>
        </div>

        <button type="submit" class="submit-btn" id="submitBtn">Submit Feedback</button>
    </form>

    <div id="global-footer"></div>
</div>

<div id="customAlert" class="modal-overlay">
    <div class="modal-box">
        <h3 class="modal-title" id="alertTitle">Alert</h3>
        <p class="modal-desc" id="alertMessage">Msg</p>
        <button class="modal-btn" onclick="document.getElementById('customAlert').classList.remove('active')">OK</button>
    </div>
</div>

<script src="footer.js"></script>
<script>
    // --- STAR RATING ---
    function rate(val) {
        document.getElementById('ratingValue').value = val;
        document.querySelectorAll('.star').forEach(s => {
            s.classList.toggle('active', s.getAttribute('data-value') <= val);
        });
    }

    // --- CHAR COUNTER ---
    function updateCounter() {
        document.getElementById('charCount').innerText = document.getElementById('descBox').value.length + " / 1000";
    }

    // --- FILE HANDLING (.ZIP ONLY) ---
    function handleFile(input) {
        const label = document.getElementById('fileLabel');
        const nameDisplay = document.getElementById('fileName');
        
        if (input.files && input.files[0]) {
            const file = input.files[0];
            
            // Check extension
            if (file.name.toLowerCase().endsWith('.zip')) {
                label.style.display = 'none';
                nameDisplay.innerText = "Attached: " + file.name;
                nameDisplay.style.color = "#4dff4d";
            } else {
                showAlert("Invalid File", "Only .zip files are allowed.", true);
                input.value = ""; // Clear Input
                label.style.display = 'block';
                nameDisplay.innerText = "";
            }
        }
    }

    // --- CUSTOM ALERT ---
    function showAlert(t, m, err) {
        const titleEl = document.getElementById('alertTitle');
        titleEl.innerText = t;
        document.getElementById('alertMessage').innerText = m;
        
        titleEl.className = "modal-title " + (err ? "text-error" : "text-success");
        document.getElementById('customAlert').classList.add('active');
    }

    // --- SUBMIT LOGIC ---
    function validateAndSubmit() {
        // Validate Required Fields
        if(document.getElementById('ratingValue').value == 0) return showAlert("Missing Rating", "Please select a star rating.", true);
        if(document.getElementById('gidInput').value.trim() === "") return showAlert("Missing ID", "Please enter your Global Infinity ID.", true);
        if(document.getElementById('descBox').value.trim() === "") return showAlert("Empty Description", "Please write your feedback.", true);

        // Animation
        const btn = document.getElementById('submitBtn');
        const originalText = btn.innerText;
        btn.classList.add('loading');
        btn.innerText = "Sending Data...";

        setTimeout(() => {
            btn.classList.remove('loading');
            btn.classList.add('success');
            btn.innerText = "✓ Feedback Sent";
            
            showAlert("Success", "Your feedback has been successfully recorded.", false);

            // Reset Form
            setTimeout(() => {
                document.getElementById('feedbackForm').reset();
                rate(0);
                document.getElementById('fileName').innerText = "";
                document.getElementById('fileLabel').style.display = 'block';
                updateCounter();
                btn.classList.remove('success');
                btn.innerText = originalText;
            }, 2000);
        }, 1500);
    }

    // Load Footer
    fetch('footer.html').then(r => r.text()).then(d => document.getElementById('global-footer').innerHTML = d);
</script>

<script src="global-script.js"></script>

</body>
</html>
